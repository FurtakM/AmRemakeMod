// export JMM , Gladstone , Denis , Lisa , Frank , Bobby , Cyrus , Brown , Donaldson ; export others , randomsDelta ; export apemans , yourApemans ; export yourVehicles ; export DeltaDoctor ; export Harisson ; export baseCorrect ; export cutscene ; export lab ; export mission_prefix , mission_prefix_prev ; starting begin Resetfog ;
   0: CALL_OW 335
// RandomizeAll ;
   4: CALL_OW 11
// FogOff ( true ) ;
   8: LD_INT 1
  10: PPUSH
  11: CALL_OW 344
// baseCorrect = 0 ;
  15: LD_ADDR_EXP 17
  19: PUSH
  20: LD_INT 0
  22: ST_TO_ADDR
// cutscene = 1 ;
  23: LD_ADDR_EXP 18
  27: PUSH
  28: LD_INT 1
  30: ST_TO_ADDR
// apemans = [ ] ;
  31: LD_ADDR_EXP 12
  35: PUSH
  36: EMPTY
  37: ST_TO_ADDR
// yourApemans = [ ] ;
  38: LD_ADDR_EXP 13
  42: PUSH
  43: EMPTY
  44: ST_TO_ADDR
// yourVehicles = [ ] ;
  45: LD_ADDR_EXP 14
  49: PUSH
  50: EMPTY
  51: ST_TO_ADDR
// randomsDelta := [ ] ;
  52: LD_ADDR_EXP 11
  56: PUSH
  57: EMPTY
  58: ST_TO_ADDR
// mission_prefix := 06_ ;
  59: LD_ADDR_EXP 20
  63: PUSH
  64: LD_STRING 06_
  66: ST_TO_ADDR
// mission_prefix_prev := 05_ ;
  67: LD_ADDR_EXP 21
  71: PUSH
  72: LD_STRING 05_
  74: ST_TO_ADDR
// PrepareDeltaBase ;
  75: CALL 2226 0 0
// LoadVehicles ;
  79: CALL 1268 0 0
// PrepareHeroes ;
  83: CALL 155 0 0
// PrepareRandoms ;
  87: CALL 1569 0 0
// lab = FilterAllUnits ( [ [ f_side , 1 ] , [ f_or , [ f_btype , b_lab ] , [ f_btype , b_lab_half ] , [ f_btype , b_lab_full ] ] ] ) ;
  91: LD_ADDR_EXP 19
  95: PUSH
  96: LD_INT 22
  98: PUSH
  99: LD_INT 1
 101: PUSH
 102: EMPTY
 103: LIST
 104: LIST
 105: PUSH
 106: LD_INT 2
 108: PUSH
 109: LD_INT 30
 111: PUSH
 112: LD_INT 6
 114: PUSH
 115: EMPTY
 116: LIST
 117: LIST
 118: PUSH
 119: LD_INT 30
 121: PUSH
 122: LD_INT 7
 124: PUSH
 125: EMPTY
 126: LIST
 127: LIST
 128: PUSH
 129: LD_INT 30
 131: PUSH
 132: LD_INT 8
 134: PUSH
 135: EMPTY
 136: LIST
 137: LIST
 138: PUSH
 139: EMPTY
 140: LIST
 141: LIST
 142: LIST
 143: LIST
 144: PUSH
 145: EMPTY
 146: LIST
 147: LIST
 148: PPUSH
 149: CALL_OW 69
 153: ST_TO_ADDR
// end ; end_of_file
 154: END
// export function PrepareHeroes ; var i , tmp , ape , test ; begin
 155: LD_INT 0
 157: PPUSH
 158: PPUSH
 159: PPUSH
 160: PPUSH
 161: PPUSH
// tmp = FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_building ] , [ f_btype , b_depot ] ] ) ;
 162: LD_ADDR_VAR 0 3
 166: PUSH
 167: LD_INT 22
 169: PUSH
 170: LD_INT 1
 172: PUSH
 173: EMPTY
 174: LIST
 175: LIST
 176: PUSH
 177: LD_INT 21
 179: PUSH
 180: LD_INT 3
 182: PUSH
 183: EMPTY
 184: LIST
 185: LIST
 186: PUSH
 187: LD_INT 30
 189: PUSH
 190: LD_INT 0
 192: PUSH
 193: EMPTY
 194: LIST
 195: LIST
 196: PUSH
 197: EMPTY
 198: LIST
 199: LIST
 200: LIST
 201: PPUSH
 202: CALL_OW 69
 206: ST_TO_ADDR
// SetBName ( tmp [ 1 ] , delta ) ;
 207: LD_VAR 0 3
 211: PUSH
 212: LD_INT 1
 214: ARRAY
 215: PPUSH
 216: LD_STRING delta
 218: PPUSH
 219: CALL_OW 500
// uc_side = 1 ;
 223: LD_ADDR_OWVAR 20
 227: PUSH
 228: LD_INT 1
 230: ST_TO_ADDR
// uc_nation = 1 ;
 231: LD_ADDR_OWVAR 21
 235: PUSH
 236: LD_INT 1
 238: ST_TO_ADDR
// JMM = PrepareUnit ( JMM , true ) ;
 239: LD_ADDR_EXP 1
 243: PUSH
 244: LD_STRING JMM
 246: PPUSH
 247: LD_INT 1
 249: PPUSH
 250: CALL 4113 0 2
 254: ST_TO_ADDR
// Harisson = PrepareUnit ( Harisson , false ) ;
 255: LD_ADDR_EXP 16
 259: PUSH
 260: LD_STRING Harisson
 262: PPUSH
 263: LD_INT 0
 265: PPUSH
 266: CALL 4113 0 2
 270: ST_TO_ADDR
// PlaceUnitXYR ( JMM , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 271: LD_EXP 1
 275: PPUSH
 276: LD_VAR 0 3
 280: PUSH
 281: LD_INT 1
 283: ARRAY
 284: PPUSH
 285: CALL_OW 250
 289: PPUSH
 290: LD_VAR 0 3
 294: PUSH
 295: LD_INT 1
 297: ARRAY
 298: PPUSH
 299: CALL_OW 251
 303: PPUSH
 304: LD_INT 5
 306: PPUSH
 307: LD_INT 0
 309: PPUSH
 310: CALL_OW 50
// SetClass ( JMM , 1 ) ;
 314: LD_EXP 1
 318: PPUSH
 319: LD_INT 1
 321: PPUSH
 322: CALL_OW 336
// Gladstone = PrepareUnit ( Gladstone , true ) ;
 326: LD_ADDR_EXP 2
 330: PUSH
 331: LD_STRING Gladstone
 333: PPUSH
 334: LD_INT 1
 336: PPUSH
 337: CALL 4113 0 2
 341: ST_TO_ADDR
// PlaceUnitXYR ( Gladstone , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 342: LD_EXP 2
 346: PPUSH
 347: LD_VAR 0 3
 351: PUSH
 352: LD_INT 1
 354: ARRAY
 355: PPUSH
 356: CALL_OW 250
 360: PPUSH
 361: LD_VAR 0 3
 365: PUSH
 366: LD_INT 1
 368: ARRAY
 369: PPUSH
 370: CALL_OW 251
 374: PPUSH
 375: LD_INT 5
 377: PPUSH
 378: LD_INT 0
 380: PPUSH
 381: CALL_OW 50
// SetClass ( Gladstone , 4 ) ;
 385: LD_EXP 2
 389: PPUSH
 390: LD_INT 4
 392: PPUSH
 393: CALL_OW 336
// Denis = PrepareUnit ( Denis , true ) ;
 397: LD_ADDR_EXP 3
 401: PUSH
 402: LD_STRING Denis
 404: PPUSH
 405: LD_INT 1
 407: PPUSH
 408: CALL 4113 0 2
 412: ST_TO_ADDR
// PlaceUnitXYR ( Denis , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 413: LD_EXP 3
 417: PPUSH
 418: LD_VAR 0 3
 422: PUSH
 423: LD_INT 1
 425: ARRAY
 426: PPUSH
 427: CALL_OW 250
 431: PPUSH
 432: LD_VAR 0 3
 436: PUSH
 437: LD_INT 1
 439: ARRAY
 440: PPUSH
 441: CALL_OW 251
 445: PPUSH
 446: LD_INT 5
 448: PPUSH
 449: LD_INT 0
 451: PPUSH
 452: CALL_OW 50
// SetClass ( Denis , 4 ) ;
 456: LD_EXP 3
 460: PPUSH
 461: LD_INT 4
 463: PPUSH
 464: CALL_OW 336
// if LoadVariable ( FrankInDelta , 0 ) = 1 then
 468: LD_STRING FrankInDelta
 470: PPUSH
 471: LD_INT 0
 473: PPUSH
 474: CALL_OW 30
 478: PUSH
 479: LD_INT 1
 481: EQUAL
 482: IFFALSE 555
// begin Frank = PrepareUnit ( Frank , true ) ;
 484: LD_ADDR_EXP 5
 488: PUSH
 489: LD_STRING Frank
 491: PPUSH
 492: LD_INT 1
 494: PPUSH
 495: CALL 4113 0 2
 499: ST_TO_ADDR
// PlaceUnitXYR ( Frank , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 500: LD_EXP 5
 504: PPUSH
 505: LD_VAR 0 3
 509: PUSH
 510: LD_INT 1
 512: ARRAY
 513: PPUSH
 514: CALL_OW 250
 518: PPUSH
 519: LD_VAR 0 3
 523: PUSH
 524: LD_INT 1
 526: ARRAY
 527: PPUSH
 528: CALL_OW 251
 532: PPUSH
 533: LD_INT 5
 535: PPUSH
 536: LD_INT 0
 538: PPUSH
 539: CALL_OW 50
// SetClass ( Frank , 1 ) ;
 543: LD_EXP 5
 547: PPUSH
 548: LD_INT 1
 550: PPUSH
 551: CALL_OW 336
// end ; if LoadVariable ( LisaInDelta , 0 ) = 1 then
 555: LD_STRING LisaInDelta
 557: PPUSH
 558: LD_INT 0
 560: PPUSH
 561: CALL_OW 30
 565: PUSH
 566: LD_INT 1
 568: EQUAL
 569: IFFALSE 642
// begin Lisa = PrepareUnit ( Lisa , true ) ;
 571: LD_ADDR_EXP 4
 575: PUSH
 576: LD_STRING Lisa
 578: PPUSH
 579: LD_INT 1
 581: PPUSH
 582: CALL 4113 0 2
 586: ST_TO_ADDR
// PlaceUnitXYR ( Lisa , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 587: LD_EXP 4
 591: PPUSH
 592: LD_VAR 0 3
 596: PUSH
 597: LD_INT 1
 599: ARRAY
 600: PPUSH
 601: CALL_OW 250
 605: PPUSH
 606: LD_VAR 0 3
 610: PUSH
 611: LD_INT 1
 613: ARRAY
 614: PPUSH
 615: CALL_OW 251
 619: PPUSH
 620: LD_INT 5
 622: PPUSH
 623: LD_INT 0
 625: PPUSH
 626: CALL_OW 50
// SetClass ( Lisa , 1 ) ;
 630: LD_EXP 4
 634: PPUSH
 635: LD_INT 1
 637: PPUSH
 638: CALL_OW 336
// end ; if LoadVariable ( BobbyInDelta , 0 ) = 1 then
 642: LD_STRING BobbyInDelta
 644: PPUSH
 645: LD_INT 0
 647: PPUSH
 648: CALL_OW 30
 652: PUSH
 653: LD_INT 1
 655: EQUAL
 656: IFFALSE 729
// begin Bobby = PrepareUnit ( Bobby , true ) ;
 658: LD_ADDR_EXP 6
 662: PUSH
 663: LD_STRING Bobby
 665: PPUSH
 666: LD_INT 1
 668: PPUSH
 669: CALL 4113 0 2
 673: ST_TO_ADDR
// PlaceUnitXYR ( Bobby , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 674: LD_EXP 6
 678: PPUSH
 679: LD_VAR 0 3
 683: PUSH
 684: LD_INT 1
 686: ARRAY
 687: PPUSH
 688: CALL_OW 250
 692: PPUSH
 693: LD_VAR 0 3
 697: PUSH
 698: LD_INT 1
 700: ARRAY
 701: PPUSH
 702: CALL_OW 251
 706: PPUSH
 707: LD_INT 5
 709: PPUSH
 710: LD_INT 0
 712: PPUSH
 713: CALL_OW 50
// SetClass ( Bobby , 1 ) ;
 717: LD_EXP 6
 721: PPUSH
 722: LD_INT 1
 724: PPUSH
 725: CALL_OW 336
// end ; if LoadVariable ( CyrusInDelta , 0 ) = 1 then
 729: LD_STRING CyrusInDelta
 731: PPUSH
 732: LD_INT 0
 734: PPUSH
 735: CALL_OW 30
 739: PUSH
 740: LD_INT 1
 742: EQUAL
 743: IFFALSE 816
// begin Cyrus = PrepareUnit ( Cyrus , true ) ;
 745: LD_ADDR_EXP 7
 749: PUSH
 750: LD_STRING Cyrus
 752: PPUSH
 753: LD_INT 1
 755: PPUSH
 756: CALL 4113 0 2
 760: ST_TO_ADDR
// PlaceUnitXYR ( Cyrus , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 761: LD_EXP 7
 765: PPUSH
 766: LD_VAR 0 3
 770: PUSH
 771: LD_INT 1
 773: ARRAY
 774: PPUSH
 775: CALL_OW 250
 779: PPUSH
 780: LD_VAR 0 3
 784: PUSH
 785: LD_INT 1
 787: ARRAY
 788: PPUSH
 789: CALL_OW 251
 793: PPUSH
 794: LD_INT 5
 796: PPUSH
 797: LD_INT 0
 799: PPUSH
 800: CALL_OW 50
// SetClass ( Cyrus , 1 ) ;
 804: LD_EXP 7
 808: PPUSH
 809: LD_INT 1
 811: PPUSH
 812: CALL_OW 336
// end ; if LoadVariable ( DonaldsonInDelta , 0 ) = 1 then
 816: LD_STRING DonaldsonInDelta
 818: PPUSH
 819: LD_INT 0
 821: PPUSH
 822: CALL_OW 30
 826: PUSH
 827: LD_INT 1
 829: EQUAL
 830: IFFALSE 903
// begin Donaldson = PrepareUnit ( Donaldson , true ) ;
 832: LD_ADDR_EXP 9
 836: PUSH
 837: LD_STRING Donaldson
 839: PPUSH
 840: LD_INT 1
 842: PPUSH
 843: CALL 4113 0 2
 847: ST_TO_ADDR
// PlaceUnitXYR ( Donaldson , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 848: LD_EXP 9
 852: PPUSH
 853: LD_VAR 0 3
 857: PUSH
 858: LD_INT 1
 860: ARRAY
 861: PPUSH
 862: CALL_OW 250
 866: PPUSH
 867: LD_VAR 0 3
 871: PUSH
 872: LD_INT 1
 874: ARRAY
 875: PPUSH
 876: CALL_OW 251
 880: PPUSH
 881: LD_INT 5
 883: PPUSH
 884: LD_INT 0
 886: PPUSH
 887: CALL_OW 50
// SetClass ( Donaldson , 1 ) ;
 891: LD_EXP 9
 895: PPUSH
 896: LD_INT 1
 898: PPUSH
 899: CALL_OW 336
// end ; if LoadVariable ( BrownInDelta , 0 ) = 1 then
 903: LD_STRING BrownInDelta
 905: PPUSH
 906: LD_INT 0
 908: PPUSH
 909: CALL_OW 30
 913: PUSH
 914: LD_INT 1
 916: EQUAL
 917: IFFALSE 990
// begin Brown = PrepareUnit ( Brown , true ) ;
 919: LD_ADDR_EXP 8
 923: PUSH
 924: LD_STRING Brown
 926: PPUSH
 927: LD_INT 1
 929: PPUSH
 930: CALL 4113 0 2
 934: ST_TO_ADDR
// PlaceUnitXYR ( Brown , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
 935: LD_EXP 8
 939: PPUSH
 940: LD_VAR 0 3
 944: PUSH
 945: LD_INT 1
 947: ARRAY
 948: PPUSH
 949: CALL_OW 250
 953: PPUSH
 954: LD_VAR 0 3
 958: PUSH
 959: LD_INT 1
 961: ARRAY
 962: PPUSH
 963: CALL_OW 251
 967: PPUSH
 968: LD_INT 5
 970: PPUSH
 971: LD_INT 0
 973: PPUSH
 974: CALL_OW 50
// SetClass ( Brown , 2 ) ;
 978: LD_EXP 8
 982: PPUSH
 983: LD_INT 2
 985: PPUSH
 986: CALL_OW 336
// end ; others = CreateCharacterSet ( othersInDelta ) ;
 990: LD_ADDR_EXP 10
 994: PUSH
 995: LD_STRING othersInDelta
 997: PPUSH
 998: CALL_OW 31
1002: ST_TO_ADDR
// for i in others do
1003: LD_ADDR_VAR 0 2
1007: PUSH
1008: LD_EXP 10
1012: PUSH
1013: FOR_IN
1014: IFFALSE 1061
// PlaceUnitXYR ( i , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 35 , false ) ;
1016: LD_VAR 0 2
1020: PPUSH
1021: LD_VAR 0 3
1025: PUSH
1026: LD_INT 1
1028: ARRAY
1029: PPUSH
1030: CALL_OW 250
1034: PPUSH
1035: LD_VAR 0 3
1039: PUSH
1040: LD_INT 1
1042: ARRAY
1043: PPUSH
1044: CALL_OW 251
1048: PPUSH
1049: LD_INT 35
1051: PPUSH
1052: LD_INT 0
1054: PPUSH
1055: CALL_OW 50
1059: GO 1013
1061: POP
1062: POP
// apemans = CreateCharacterSet ( apeInDelta ) ;
1063: LD_ADDR_EXP 12
1067: PUSH
1068: LD_STRING apeInDelta
1070: PPUSH
1071: CALL_OW 31
1075: ST_TO_ADDR
// uc_nation = 0 ;
1076: LD_ADDR_OWVAR 21
1080: PUSH
1081: LD_INT 0
1083: ST_TO_ADDR
// if apemans > 5 then
1084: LD_EXP 12
1088: PUSH
1089: LD_INT 5
1091: GREATER
1092: IFFALSE 1187
// begin for i := 1 to 5 do
1094: LD_ADDR_VAR 0 2
1098: PUSH
1099: DOUBLE
1100: LD_INT 1
1102: DEC
1103: ST_TO_ADDR
1104: LD_INT 5
1106: PUSH
1107: FOR_TO
1108: IFFALSE 1183
// begin PlaceUnitXYR ( apemans [ i ] , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 50 , false ) ;
1110: LD_EXP 12
1114: PUSH
1115: LD_VAR 0 2
1119: ARRAY
1120: PPUSH
1121: LD_VAR 0 3
1125: PUSH
1126: LD_INT 1
1128: ARRAY
1129: PPUSH
1130: CALL_OW 250
1134: PPUSH
1135: LD_VAR 0 3
1139: PUSH
1140: LD_INT 1
1142: ARRAY
1143: PPUSH
1144: CALL_OW 251
1148: PPUSH
1149: LD_INT 50
1151: PPUSH
1152: LD_INT 0
1154: PPUSH
1155: CALL_OW 50
// yourApemans = yourApemans ^ apemans [ i ] ;
1159: LD_ADDR_EXP 13
1163: PUSH
1164: LD_EXP 13
1168: PUSH
1169: LD_EXP 12
1173: PUSH
1174: LD_VAR 0 2
1178: ARRAY
1179: ADD
1180: ST_TO_ADDR
// end ;
1181: GO 1107
1183: POP
1184: POP
// end else
1185: GO 1263
// begin for i in apemans do
1187: LD_ADDR_VAR 0 2
1191: PUSH
1192: LD_EXP 12
1196: PUSH
1197: FOR_IN
1198: IFFALSE 1261
// begin PlaceUnitXYR ( i , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 50 , false ) ;
1200: LD_VAR 0 2
1204: PPUSH
1205: LD_VAR 0 3
1209: PUSH
1210: LD_INT 1
1212: ARRAY
1213: PPUSH
1214: CALL_OW 250
1218: PPUSH
1219: LD_VAR 0 3
1223: PUSH
1224: LD_INT 1
1226: ARRAY
1227: PPUSH
1228: CALL_OW 251
1232: PPUSH
1233: LD_INT 50
1235: PPUSH
1236: LD_INT 0
1238: PPUSH
1239: CALL_OW 50
// yourApemans = yourApemans ^ i ;
1243: LD_ADDR_EXP 13
1247: PUSH
1248: LD_EXP 13
1252: PUSH
1253: LD_VAR 0 2
1257: ADD
1258: ST_TO_ADDR
// end ;
1259: GO 1197
1261: POP
1262: POP
// end ; end ;
1263: LD_VAR 0 1
1267: RET
// export function LoadVehicles ; var i , veh , tmp , vehicles ; begin
1268: LD_INT 0
1270: PPUSH
1271: PPUSH
1272: PPUSH
1273: PPUSH
1274: PPUSH
// tmp = FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_building ] , [ f_btype , b_depot ] ] ) ;
1275: LD_ADDR_VAR 0 4
1279: PUSH
1280: LD_INT 22
1282: PUSH
1283: LD_INT 1
1285: PUSH
1286: EMPTY
1287: LIST
1288: LIST
1289: PUSH
1290: LD_INT 21
1292: PUSH
1293: LD_INT 3
1295: PUSH
1296: EMPTY
1297: LIST
1298: LIST
1299: PUSH
1300: LD_INT 30
1302: PUSH
1303: LD_INT 0
1305: PUSH
1306: EMPTY
1307: LIST
1308: LIST
1309: PUSH
1310: EMPTY
1311: LIST
1312: LIST
1313: LIST
1314: PPUSH
1315: CALL_OW 69
1319: ST_TO_ADDR
// uc_side = 1 ;
1320: LD_ADDR_OWVAR 20
1324: PUSH
1325: LD_INT 1
1327: ST_TO_ADDR
// vehicles = LoadVariable ( vehiclesInDelta , [ ] ) ;
1328: LD_ADDR_VAR 0 5
1332: PUSH
1333: LD_STRING vehiclesInDelta
1335: PPUSH
1336: EMPTY
1337: PPUSH
1338: CALL_OW 30
1342: ST_TO_ADDR
// for i = 1 to vehicles do
1343: LD_ADDR_VAR 0 2
1347: PUSH
1348: DOUBLE
1349: LD_INT 1
1351: DEC
1352: ST_TO_ADDR
1353: LD_VAR 0 5
1357: PUSH
1358: FOR_TO
1359: IFFALSE 1562
// begin if vehicles [ i + 4 ] = 11 or vehicles [ i ] = 3 then
1361: LD_VAR 0 5
1365: PUSH
1366: LD_VAR 0 2
1370: PUSH
1371: LD_INT 4
1373: PLUS
1374: ARRAY
1375: PUSH
1376: LD_INT 11
1378: EQUAL
1379: PUSH
1380: LD_VAR 0 5
1384: PUSH
1385: LD_VAR 0 2
1389: ARRAY
1390: PUSH
1391: LD_INT 3
1393: EQUAL
1394: OR
1395: IFFALSE 1546
// begin uc_nation = vehicles [ i ] ;
1397: LD_ADDR_OWVAR 21
1401: PUSH
1402: LD_VAR 0 5
1406: PUSH
1407: LD_VAR 0 2
1411: ARRAY
1412: ST_TO_ADDR
// vc_chassis = vehicles [ i + 1 ] ;
1413: LD_ADDR_OWVAR 37
1417: PUSH
1418: LD_VAR 0 5
1422: PUSH
1423: LD_VAR 0 2
1427: PUSH
1428: LD_INT 1
1430: PLUS
1431: ARRAY
1432: ST_TO_ADDR
// vc_engine = vehicles [ i + 2 ] ;
1433: LD_ADDR_OWVAR 39
1437: PUSH
1438: LD_VAR 0 5
1442: PUSH
1443: LD_VAR 0 2
1447: PUSH
1448: LD_INT 2
1450: PLUS
1451: ARRAY
1452: ST_TO_ADDR
// vc_control = vehicles [ i + 3 ] ;
1453: LD_ADDR_OWVAR 38
1457: PUSH
1458: LD_VAR 0 5
1462: PUSH
1463: LD_VAR 0 2
1467: PUSH
1468: LD_INT 3
1470: PLUS
1471: ARRAY
1472: ST_TO_ADDR
// vc_weapon = vehicles [ i + 4 ] ;
1473: LD_ADDR_OWVAR 40
1477: PUSH
1478: LD_VAR 0 5
1482: PUSH
1483: LD_VAR 0 2
1487: PUSH
1488: LD_INT 4
1490: PLUS
1491: ARRAY
1492: ST_TO_ADDR
// veh = CreateVehicle ;
1493: LD_ADDR_VAR 0 3
1497: PUSH
1498: CALL_OW 45
1502: ST_TO_ADDR
// PlaceUnitXYR ( veh , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 40 , false ) ;
1503: LD_VAR 0 3
1507: PPUSH
1508: LD_VAR 0 4
1512: PUSH
1513: LD_INT 1
1515: ARRAY
1516: PPUSH
1517: CALL_OW 250
1521: PPUSH
1522: LD_VAR 0 4
1526: PUSH
1527: LD_INT 1
1529: ARRAY
1530: PPUSH
1531: CALL_OW 251
1535: PPUSH
1536: LD_INT 40
1538: PPUSH
1539: LD_INT 0
1541: PPUSH
1542: CALL_OW 50
// end ; i = i + 4 ;
1546: LD_ADDR_VAR 0 2
1550: PUSH
1551: LD_VAR 0 2
1555: PUSH
1556: LD_INT 4
1558: PLUS
1559: ST_TO_ADDR
// end ;
1560: GO 1358
1562: POP
1563: POP
// end ;
1564: LD_VAR 0 1
1568: RET
// export function PrepareRandoms ; var i , un , tmp , filter ; begin
1569: LD_INT 0
1571: PPUSH
1572: PPUSH
1573: PPUSH
1574: PPUSH
1575: PPUSH
// uc_side = 1 ;
1576: LD_ADDR_OWVAR 20
1580: PUSH
1581: LD_INT 1
1583: ST_TO_ADDR
// uc_nation = 1 ;
1584: LD_ADDR_OWVAR 21
1588: PUSH
1589: LD_INT 1
1591: ST_TO_ADDR
// tmp = FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_building ] , [ f_btype , b_depot ] ] ) ;
1592: LD_ADDR_VAR 0 4
1596: PUSH
1597: LD_INT 22
1599: PUSH
1600: LD_INT 1
1602: PUSH
1603: EMPTY
1604: LIST
1605: LIST
1606: PUSH
1607: LD_INT 21
1609: PUSH
1610: LD_INT 3
1612: PUSH
1613: EMPTY
1614: LIST
1615: LIST
1616: PUSH
1617: LD_INT 30
1619: PUSH
1620: LD_INT 0
1622: PUSH
1623: EMPTY
1624: LIST
1625: LIST
1626: PUSH
1627: EMPTY
1628: LIST
1629: LIST
1630: LIST
1631: PPUSH
1632: CALL_OW 69
1636: ST_TO_ADDR
// if FilterAllunits ( [ [ [ f_side , 1 ] , [ f_class , 4 ] , [ f_sex , sex_male ] ] ] ) diff [ JMM , Cyrus , Bobby , Frank , Gladstone , Denis , Brown ] then
1637: LD_INT 22
1639: PUSH
1640: LD_INT 1
1642: PUSH
1643: EMPTY
1644: LIST
1645: LIST
1646: PUSH
1647: LD_INT 25
1649: PUSH
1650: LD_INT 4
1652: PUSH
1653: EMPTY
1654: LIST
1655: LIST
1656: PUSH
1657: LD_INT 26
1659: PUSH
1660: LD_INT 1
1662: PUSH
1663: EMPTY
1664: LIST
1665: LIST
1666: PUSH
1667: EMPTY
1668: LIST
1669: LIST
1670: LIST
1671: PUSH
1672: EMPTY
1673: LIST
1674: PPUSH
1675: CALL_OW 69
1679: PUSH
1680: LD_EXP 1
1684: PUSH
1685: LD_EXP 7
1689: PUSH
1690: LD_EXP 6
1694: PUSH
1695: LD_EXP 5
1699: PUSH
1700: LD_EXP 2
1704: PUSH
1705: LD_EXP 3
1709: PUSH
1710: LD_EXP 8
1714: PUSH
1715: EMPTY
1716: LIST
1717: LIST
1718: LIST
1719: LIST
1720: LIST
1721: LIST
1722: LIST
1723: DIFF
1724: IFFALSE 1825
// deltaDoctor := ( FilterAllunits ( [ [ [ f_side , 1 ] , [ f_class , 4 ] , [ f_sex , sex_male ] ] ] ) diff [ JMM , Cyrus , Bobby , Frank , Gladstone , Denis , Brown ] ) [ 1 ] else
1726: LD_ADDR_EXP 15
1730: PUSH
1731: LD_INT 22
1733: PUSH
1734: LD_INT 1
1736: PUSH
1737: EMPTY
1738: LIST
1739: LIST
1740: PUSH
1741: LD_INT 25
1743: PUSH
1744: LD_INT 4
1746: PUSH
1747: EMPTY
1748: LIST
1749: LIST
1750: PUSH
1751: LD_INT 26
1753: PUSH
1754: LD_INT 1
1756: PUSH
1757: EMPTY
1758: LIST
1759: LIST
1760: PUSH
1761: EMPTY
1762: LIST
1763: LIST
1764: LIST
1765: PUSH
1766: EMPTY
1767: LIST
1768: PPUSH
1769: CALL_OW 69
1773: PUSH
1774: LD_EXP 1
1778: PUSH
1779: LD_EXP 7
1783: PUSH
1784: LD_EXP 6
1788: PUSH
1789: LD_EXP 5
1793: PUSH
1794: LD_EXP 2
1798: PUSH
1799: LD_EXP 3
1803: PUSH
1804: LD_EXP 8
1808: PUSH
1809: EMPTY
1810: LIST
1811: LIST
1812: LIST
1813: LIST
1814: LIST
1815: LIST
1816: LIST
1817: DIFF
1818: PUSH
1819: LD_INT 1
1821: ARRAY
1822: ST_TO_ADDR
1823: GO 1972
// begin filter := FilterAllunits ( [ [ [ f_side , 1 ] , [ f_sex , sex_male ] ] ] ) diff [ JMM , Cyrus , Bobby , Frank , Gladstone , Denis , Brown ] ;
1825: LD_ADDR_VAR 0 5
1829: PUSH
1830: LD_INT 22
1832: PUSH
1833: LD_INT 1
1835: PUSH
1836: EMPTY
1837: LIST
1838: LIST
1839: PUSH
1840: LD_INT 26
1842: PUSH
1843: LD_INT 1
1845: PUSH
1846: EMPTY
1847: LIST
1848: LIST
1849: PUSH
1850: EMPTY
1851: LIST
1852: LIST
1853: PUSH
1854: EMPTY
1855: LIST
1856: PPUSH
1857: CALL_OW 69
1861: PUSH
1862: LD_EXP 1
1866: PUSH
1867: LD_EXP 7
1871: PUSH
1872: LD_EXP 6
1876: PUSH
1877: LD_EXP 5
1881: PUSH
1882: LD_EXP 2
1886: PUSH
1887: LD_EXP 3
1891: PUSH
1892: LD_EXP 8
1896: PUSH
1897: EMPTY
1898: LIST
1899: LIST
1900: LIST
1901: LIST
1902: LIST
1903: LIST
1904: LIST
1905: DIFF
1906: ST_TO_ADDR
// if filter then
1907: LD_VAR 0 5
1911: IFFALSE 1972
// for i in filter do
1913: LD_ADDR_VAR 0 2
1917: PUSH
1918: LD_VAR 0 5
1922: PUSH
1923: FOR_IN
1924: IFFALSE 1970
// if GetSkill ( i , 4 ) >= 4 then
1926: LD_VAR 0 2
1930: PPUSH
1931: LD_INT 4
1933: PPUSH
1934: CALL_OW 259
1938: PUSH
1939: LD_INT 4
1941: GREATEREQUAL
1942: IFFALSE 1968
// begin deltaDoctor := i ;
1944: LD_ADDR_EXP 15
1948: PUSH
1949: LD_VAR 0 2
1953: ST_TO_ADDR
// SetClass ( deltaDoctor , 4 ) ;
1954: LD_EXP 15
1958: PPUSH
1959: LD_INT 4
1961: PPUSH
1962: CALL_OW 336
// break ;
1966: GO 1970
// end ;
1968: GO 1923
1970: POP
1971: POP
// end ; for i = 1 to 6 do
1972: LD_ADDR_VAR 0 2
1976: PUSH
1977: DOUBLE
1978: LD_INT 1
1980: DEC
1981: ST_TO_ADDR
1982: LD_INT 6
1984: PUSH
1985: FOR_TO
1986: IFFALSE 2129
// begin hc_gallery =  ;
1988: LD_ADDR_OWVAR 33
1992: PUSH
1993: LD_STRING 
1995: ST_TO_ADDR
// hc_name =  ;
1996: LD_ADDR_OWVAR 26
2000: PUSH
2001: LD_STRING 
2003: ST_TO_ADDR
// PrepareHuman ( false , [ 1 , 2 , 3 , 4 ] [ Rand ( 1 , 4 ) ] , rand ( 3 , 5 ) - Difficulty ) ;
2004: LD_INT 0
2006: PPUSH
2007: LD_INT 1
2009: PUSH
2010: LD_INT 2
2012: PUSH
2013: LD_INT 3
2015: PUSH
2016: LD_INT 4
2018: PUSH
2019: EMPTY
2020: LIST
2021: LIST
2022: LIST
2023: LIST
2024: PUSH
2025: LD_INT 1
2027: PPUSH
2028: LD_INT 4
2030: PPUSH
2031: CALL_OW 12
2035: ARRAY
2036: PPUSH
2037: LD_INT 3
2039: PPUSH
2040: LD_INT 5
2042: PPUSH
2043: CALL_OW 12
2047: PUSH
2048: LD_OWVAR 67
2052: MINUS
2053: PPUSH
2054: CALL_OW 380
// un = CreateHuman ;
2058: LD_ADDR_VAR 0 3
2062: PUSH
2063: CALL_OW 44
2067: ST_TO_ADDR
// randomsDelta := randomsDelta ^ un ;
2068: LD_ADDR_EXP 11
2072: PUSH
2073: LD_EXP 11
2077: PUSH
2078: LD_VAR 0 3
2082: ADD
2083: ST_TO_ADDR
// PlaceUnitXYR ( un , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 15 , false ) ;
2084: LD_VAR 0 3
2088: PPUSH
2089: LD_VAR 0 4
2093: PUSH
2094: LD_INT 1
2096: ARRAY
2097: PPUSH
2098: CALL_OW 250
2102: PPUSH
2103: LD_VAR 0 4
2107: PUSH
2108: LD_INT 1
2110: ARRAY
2111: PPUSH
2112: CALL_OW 251
2116: PPUSH
2117: LD_INT 15
2119: PPUSH
2120: LD_INT 0
2122: PPUSH
2123: CALL_OW 50
// end ;
2127: GO 1985
2129: POP
2130: POP
// if deltaDoctor then
2131: LD_EXP 15
2135: IFFALSE 2139
// exit ;
2137: GO 2221
// hc_gallery =  ;
2139: LD_ADDR_OWVAR 33
2143: PUSH
2144: LD_STRING 
2146: ST_TO_ADDR
// hc_name = Dr. Michael Mills ;
2147: LD_ADDR_OWVAR 26
2151: PUSH
2152: LD_STRING Dr. Michael Mills
2154: ST_TO_ADDR
// PrepareHuman ( sex_male , 4 , 6 ) ;
2155: LD_INT 1
2157: PPUSH
2158: LD_INT 4
2160: PPUSH
2161: LD_INT 6
2163: PPUSH
2164: CALL_OW 380
// deltaDoctor = CreateHuman ;
2168: LD_ADDR_EXP 15
2172: PUSH
2173: CALL_OW 44
2177: ST_TO_ADDR
// PlaceUnitXYR ( deltaDoctor , GetX ( tmp [ 1 ] ) , GetY ( tmp [ 1 ] ) , 5 , false ) ;
2178: LD_EXP 15
2182: PPUSH
2183: LD_VAR 0 4
2187: PUSH
2188: LD_INT 1
2190: ARRAY
2191: PPUSH
2192: CALL_OW 250
2196: PPUSH
2197: LD_VAR 0 4
2201: PUSH
2202: LD_INT 1
2204: ARRAY
2205: PPUSH
2206: CALL_OW 251
2210: PPUSH
2211: LD_INT 5
2213: PPUSH
2214: LD_INT 0
2216: PPUSH
2217: CALL_OW 50
// end ; end_of_file
2221: LD_VAR 0 1
2225: RET
// export function PrepareDeltaBase ; var i , j , building , buildings , lab , tmp ; begin
2226: LD_INT 0
2228: PPUSH
2229: PPUSH
2230: PPUSH
2231: PPUSH
2232: PPUSH
2233: PPUSH
2234: PPUSH
// buildings = LoadVariable ( buildingsInDelta , [ ] ) ;
2235: LD_ADDR_VAR 0 5
2239: PUSH
2240: LD_STRING buildingsInDelta
2242: PPUSH
2243: EMPTY
2244: PPUSH
2245: CALL_OW 30
2249: ST_TO_ADDR
// SetResourceVisibility ( 68 , 40 , 1 ) ;
2250: LD_INT 68
2252: PPUSH
2253: LD_INT 40
2255: PPUSH
2256: LD_INT 1
2258: PPUSH
2259: CALL_OW 441
// uc_side = 1 ;
2263: LD_ADDR_OWVAR 20
2267: PUSH
2268: LD_INT 1
2270: ST_TO_ADDR
// uc_nation = 1 ;
2271: LD_ADDR_OWVAR 21
2275: PUSH
2276: LD_INT 1
2278: ST_TO_ADDR
// for i = 1 to buildings do
2279: LD_ADDR_VAR 0 2
2283: PUSH
2284: DOUBLE
2285: LD_INT 1
2287: DEC
2288: ST_TO_ADDR
2289: LD_VAR 0 5
2293: PUSH
2294: FOR_TO
2295: IFFALSE 2493
// begin bc_type = buildings [ i ] [ 1 ] ;
2297: LD_ADDR_OWVAR 42
2301: PUSH
2302: LD_VAR 0 5
2306: PUSH
2307: LD_VAR 0 2
2311: ARRAY
2312: PUSH
2313: LD_INT 1
2315: ARRAY
2316: ST_TO_ADDR
// bc_level = buildings [ i ] [ 2 ] ;
2317: LD_ADDR_OWVAR 43
2321: PUSH
2322: LD_VAR 0 5
2326: PUSH
2327: LD_VAR 0 2
2331: ARRAY
2332: PUSH
2333: LD_INT 2
2335: ARRAY
2336: ST_TO_ADDR
// if bc_type = b_lab_half or bc_type = b_lab_full then
2337: LD_OWVAR 42
2341: PUSH
2342: LD_INT 7
2344: EQUAL
2345: PUSH
2346: LD_OWVAR 42
2350: PUSH
2351: LD_INT 8
2353: EQUAL
2354: OR
2355: IFFALSE 2397
// begin bc_kind1 = buildings [ i ] [ 6 ] ;
2357: LD_ADDR_OWVAR 44
2361: PUSH
2362: LD_VAR 0 5
2366: PUSH
2367: LD_VAR 0 2
2371: ARRAY
2372: PUSH
2373: LD_INT 6
2375: ARRAY
2376: ST_TO_ADDR
// bc_kind2 = buildings [ i ] [ 7 ] ;
2377: LD_ADDR_OWVAR 45
2381: PUSH
2382: LD_VAR 0 5
2386: PUSH
2387: LD_VAR 0 2
2391: ARRAY
2392: PUSH
2393: LD_INT 7
2395: ARRAY
2396: ST_TO_ADDR
// end ; building = CreateAndPlaceBuildingXYD ( buildings [ i ] [ 3 ] , buildings [ i ] [ 4 ] , buildings [ i ] [ 5 ] ) ;
2397: LD_ADDR_VAR 0 4
2401: PUSH
2402: LD_VAR 0 5
2406: PUSH
2407: LD_VAR 0 2
2411: ARRAY
2412: PUSH
2413: LD_INT 3
2415: ARRAY
2416: PPUSH
2417: LD_VAR 0 5
2421: PUSH
2422: LD_VAR 0 2
2426: ARRAY
2427: PUSH
2428: LD_INT 4
2430: ARRAY
2431: PPUSH
2432: LD_VAR 0 5
2436: PUSH
2437: LD_VAR 0 2
2441: ARRAY
2442: PUSH
2443: LD_INT 5
2445: ARRAY
2446: PPUSH
2447: CALL_OW 47
2451: ST_TO_ADDR
// if GetBType ( building ) = b_bunker then
2452: LD_VAR 0 4
2456: PPUSH
2457: CALL_OW 266
2461: PUSH
2462: LD_INT 32
2464: EQUAL
2465: IFFALSE 2491
// PlaceWeaponTurret ( building , buildings [ i ] [ 8 ] ) ;
2467: LD_VAR 0 4
2471: PPUSH
2472: LD_VAR 0 5
2476: PUSH
2477: LD_VAR 0 2
2481: ARRAY
2482: PUSH
2483: LD_INT 8
2485: ARRAY
2486: PPUSH
2487: CALL_OW 431
// end ;
2491: GO 2294
2493: POP
2494: POP
// lab = FilterAllUnits ( [ [ f_side , 1 ] , [ f_or , [ f_btype , b_lab ] , [ f_btype , b_lab_half ] , [ f_btype , b_lab_full ] ] ] ) ;
2495: LD_ADDR_VAR 0 6
2499: PUSH
2500: LD_INT 22
2502: PUSH
2503: LD_INT 1
2505: PUSH
2506: EMPTY
2507: LIST
2508: LIST
2509: PUSH
2510: LD_INT 2
2512: PUSH
2513: LD_INT 30
2515: PUSH
2516: LD_INT 6
2518: PUSH
2519: EMPTY
2520: LIST
2521: LIST
2522: PUSH
2523: LD_INT 30
2525: PUSH
2526: LD_INT 7
2528: PUSH
2529: EMPTY
2530: LIST
2531: LIST
2532: PUSH
2533: LD_INT 30
2535: PUSH
2536: LD_INT 8
2538: PUSH
2539: EMPTY
2540: LIST
2541: LIST
2542: PUSH
2543: EMPTY
2544: LIST
2545: LIST
2546: LIST
2547: LIST
2548: PUSH
2549: EMPTY
2550: LIST
2551: LIST
2552: PPUSH
2553: CALL_OW 69
2557: ST_TO_ADDR
// tmp = FilterAllUnits ( [ [ f_side , 1 ] , [ f_btype , b_depot ] ] ) ;
2558: LD_ADDR_VAR 0 7
2562: PUSH
2563: LD_INT 22
2565: PUSH
2566: LD_INT 1
2568: PUSH
2569: EMPTY
2570: LIST
2571: LIST
2572: PUSH
2573: LD_INT 30
2575: PUSH
2576: LD_INT 0
2578: PUSH
2579: EMPTY
2580: LIST
2581: LIST
2582: PUSH
2583: EMPTY
2584: LIST
2585: LIST
2586: PPUSH
2587: CALL_OW 69
2591: ST_TO_ADDR
// if lab > 0 and tmp > 0 then
2592: LD_VAR 0 6
2596: PUSH
2597: LD_INT 0
2599: GREATER
2600: PUSH
2601: LD_VAR 0 7
2605: PUSH
2606: LD_INT 0
2608: GREATER
2609: AND
2610: IFFALSE 2620
// baseCorrect = 1 ;
2612: LD_ADDR_EXP 17
2616: PUSH
2617: LD_INT 1
2619: ST_TO_ADDR
// if baseCorrect = 0 then
2620: LD_EXP 17
2624: PUSH
2625: LD_INT 0
2627: EQUAL
2628: IFFALSE 3001
// begin for i in FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_building ] ] ) do
2630: LD_ADDR_VAR 0 2
2634: PUSH
2635: LD_INT 22
2637: PUSH
2638: LD_INT 1
2640: PUSH
2641: EMPTY
2642: LIST
2643: LIST
2644: PUSH
2645: LD_INT 21
2647: PUSH
2648: LD_INT 3
2650: PUSH
2651: EMPTY
2652: LIST
2653: LIST
2654: PUSH
2655: EMPTY
2656: LIST
2657: LIST
2658: PPUSH
2659: CALL_OW 69
2663: PUSH
2664: FOR_IN
2665: IFFALSE 2678
// RemoveUnit ( i ) ;
2667: LD_VAR 0 2
2671: PPUSH
2672: CALL_OW 64
2676: GO 2664
2678: POP
2679: POP
// uc_nation = 1 ;
2680: LD_ADDR_OWVAR 21
2684: PUSH
2685: LD_INT 1
2687: ST_TO_ADDR
// uc_side = 1 ;
2688: LD_ADDR_OWVAR 20
2692: PUSH
2693: LD_INT 1
2695: ST_TO_ADDR
// bc_level = 5 ;
2696: LD_ADDR_OWVAR 43
2700: PUSH
2701: LD_INT 5
2703: ST_TO_ADDR
// bc_type = b_depot ;
2704: LD_ADDR_OWVAR 42
2708: PUSH
2709: LD_INT 0
2711: ST_TO_ADDR
// CreateAndPlaceBuildingXYD ( 50 , 22 , 0 ) ;
2712: LD_INT 50
2714: PPUSH
2715: LD_INT 22
2717: PPUSH
2718: LD_INT 0
2720: PPUSH
2721: CALL_OW 47
// bc_type = b_bunker ;
2725: LD_ADDR_OWVAR 42
2729: PUSH
2730: LD_INT 32
2732: ST_TO_ADDR
// building = CreateAndPlaceBuildingXYD ( 68 , 24 , 4 ) ;
2733: LD_ADDR_VAR 0 4
2737: PUSH
2738: LD_INT 68
2740: PPUSH
2741: LD_INT 24
2743: PPUSH
2744: LD_INT 4
2746: PPUSH
2747: CALL_OW 47
2751: ST_TO_ADDR
// PlaceWeaponTurret ( building , [ 4 , 11 ] [ Rand ( 1 , 2 ) ] ) ;
2752: LD_VAR 0 4
2756: PPUSH
2757: LD_INT 4
2759: PUSH
2760: LD_INT 11
2762: PUSH
2763: EMPTY
2764: LIST
2765: LIST
2766: PUSH
2767: LD_INT 1
2769: PPUSH
2770: LD_INT 2
2772: PPUSH
2773: CALL_OW 12
2777: ARRAY
2778: PPUSH
2779: CALL_OW 431
// building = CreateAndPlaceBuildingXYD ( 71 , 34 , 4 ) ;
2783: LD_ADDR_VAR 0 4
2787: PUSH
2788: LD_INT 71
2790: PPUSH
2791: LD_INT 34
2793: PPUSH
2794: LD_INT 4
2796: PPUSH
2797: CALL_OW 47
2801: ST_TO_ADDR
// PlaceWeaponTurret ( building , [ 4 , 11 ] [ Rand ( 1 , 2 ) ] ) ;
2802: LD_VAR 0 4
2806: PPUSH
2807: LD_INT 4
2809: PUSH
2810: LD_INT 11
2812: PUSH
2813: EMPTY
2814: LIST
2815: LIST
2816: PUSH
2817: LD_INT 1
2819: PPUSH
2820: LD_INT 2
2822: PPUSH
2823: CALL_OW 12
2827: ARRAY
2828: PPUSH
2829: CALL_OW 431
// bc_type = 31 ;
2833: LD_ADDR_OWVAR 42
2837: PUSH
2838: LD_INT 31
2840: ST_TO_ADDR
// CreateAndPlaceBuildingXYD ( 51 , 7 , 3 ) ;
2841: LD_INT 51
2843: PPUSH
2844: LD_INT 7
2846: PPUSH
2847: LD_INT 3
2849: PPUSH
2850: CALL_OW 47
// bc_type = b_oil_mine ;
2854: LD_ADDR_OWVAR 42
2858: PUSH
2859: LD_INT 29
2861: ST_TO_ADDR
// CreateAndPlaceBuildingXYD ( 68 , 40 , 1 ) ;
2862: LD_INT 68
2864: PPUSH
2865: LD_INT 40
2867: PPUSH
2868: LD_INT 1
2870: PPUSH
2871: CALL_OW 47
// bc_type = b_workshop ;
2875: LD_ADDR_OWVAR 42
2879: PUSH
2880: LD_INT 2
2882: ST_TO_ADDR
// CreateAndPlaceBuildingXYD ( 38 , 20 , 2 ) ;
2883: LD_INT 38
2885: PPUSH
2886: LD_INT 20
2888: PPUSH
2889: LD_INT 2
2891: PPUSH
2892: CALL_OW 47
// bc_type = b_armoury ;
2896: LD_ADDR_OWVAR 42
2900: PUSH
2901: LD_INT 4
2903: ST_TO_ADDR
// CreateAndPlaceBuildingXYD ( 38 , 20 , 2 ) ;
2904: LD_INT 38
2906: PPUSH
2907: LD_INT 20
2909: PPUSH
2910: LD_INT 2
2912: PPUSH
2913: CALL_OW 47
// bc_type = b_solar_power ;
2917: LD_ADDR_OWVAR 42
2921: PUSH
2922: LD_INT 27
2924: ST_TO_ADDR
// CreateAndPlaceBuildingXYD ( 46 , 12 , 1 ) ;
2925: LD_INT 46
2927: PPUSH
2928: LD_INT 12
2930: PPUSH
2931: LD_INT 1
2933: PPUSH
2934: CALL_OW 47
// CreateAndPlaceBuildingXYD ( 48 , 11 , 2 ) ;
2938: LD_INT 48
2940: PPUSH
2941: LD_INT 11
2943: PPUSH
2944: LD_INT 2
2946: PPUSH
2947: CALL_OW 47
// CreateAndPlaceBuildingXYD ( 49 , 11 , 3 ) ;
2951: LD_INT 49
2953: PPUSH
2954: LD_INT 11
2956: PPUSH
2957: LD_INT 3
2959: PPUSH
2960: CALL_OW 47
// bc_type = b_lab_half ;
2964: LD_ADDR_OWVAR 42
2968: PUSH
2969: LD_INT 7
2971: ST_TO_ADDR
// bc_kind1 = b_lab_opto ;
2972: LD_ADDR_OWVAR 44
2976: PUSH
2977: LD_INT 15
2979: ST_TO_ADDR
// bc_kind2 = b_lab_basic ;
2980: LD_ADDR_OWVAR 45
2984: PUSH
2985: LD_INT 9
2987: ST_TO_ADDR
// CreateAndPlaceBuildingXYD ( 42 , 15 , 2 ) ;
2988: LD_INT 42
2990: PPUSH
2991: LD_INT 15
2993: PPUSH
2994: LD_INT 2
2996: PPUSH
2997: CALL_OW 47
// end ; end ; end_of_file
3001: LD_VAR 0 1
3005: RET
// every 1 do var i , j , tmp ;
3006: GO 3008
3008: DISABLE
3009: LD_INT 0
3011: PPUSH
3012: PPUSH
3013: PPUSH
// begin InGameOn ;
3014: CALL_OW 8
// CenterNowOnUnits ( lab [ 1 ] ) ;
3018: LD_EXP 19
3022: PUSH
3023: LD_INT 1
3025: ARRAY
3026: PPUSH
3027: CALL_OW 87
// if IsOK ( Denis ) then
3031: LD_EXP 3
3035: PPUSH
3036: CALL_OW 302
3040: IFFALSE 3068
// begin SetTech ( tech_radar , 1 , state_researched ) ;
3042: LD_INT 6
3044: PPUSH
3045: LD_INT 1
3047: PPUSH
3048: LD_INT 2
3050: PPUSH
3051: CALL_OW 322
// SetRestrict ( b_ext_radar , 1 , true ) ;
3055: LD_INT 20
3057: PPUSH
3058: LD_INT 1
3060: PPUSH
3061: LD_INT 1
3063: PPUSH
3064: CALL_OW 324
// end ; CenterNowOnUnits ( JMM ) ;
3068: LD_EXP 1
3072: PPUSH
3073: CALL_OW 87
// ComTurnUnit ( JMM , DeltaDoctor ) ;
3077: LD_EXP 1
3081: PPUSH
3082: LD_EXP 15
3086: PPUSH
3087: CALL_OW 119
// repeat wait ( 0 0$1 ) ;
3091: LD_INT 35
3093: PPUSH
3094: CALL_OW 67
// ComMoveUnit ( DeltaDoctor , JMM ) ;
3098: LD_EXP 15
3102: PPUSH
3103: LD_EXP 1
3107: PPUSH
3108: CALL_OW 112
// until GetDistUnits ( JMM , DeltaDoctor ) < 5 ;
3112: LD_EXP 1
3116: PPUSH
3117: LD_EXP 15
3121: PPUSH
3122: CALL_OW 296
3126: PUSH
3127: LD_INT 5
3129: LESS
3130: IFFALSE 3091
// ComTurnUnit ( DeltaDoctor , JMM ) ;
3132: LD_EXP 15
3136: PPUSH
3137: LD_EXP 1
3141: PPUSH
3142: CALL_OW 119
// Say ( JMM , D1-JMM-1 ) ;
3146: LD_EXP 1
3150: PPUSH
3151: LD_STRING D1-JMM-1
3153: PPUSH
3154: CALL_OW 88
// Say ( DeltaDoctor , D1-Sci-1 ) ;
3158: LD_EXP 15
3162: PPUSH
3163: LD_STRING D1-Sci-1
3165: PPUSH
3166: CALL_OW 88
// ComEnterUnit ( [ JMM , DeltaDoctor , Denis ] , lab [ 1 ] ) ;
3170: LD_EXP 1
3174: PUSH
3175: LD_EXP 15
3179: PUSH
3180: LD_EXP 3
3184: PUSH
3185: EMPTY
3186: LIST
3187: LIST
3188: LIST
3189: PPUSH
3190: LD_EXP 19
3194: PUSH
3195: LD_INT 1
3197: ARRAY
3198: PPUSH
3199: CALL_OW 120
// end ;
3203: PPOPN 3
3205: END
// every 0 0$2 trigger IsInUnit ( JMM ) = lab [ 1 ] and IsInUnit ( DeltaDoctor ) = lab [ 1 ] do var i , j , tmp ;
3206: LD_EXP 1
3210: PPUSH
3211: CALL_OW 310
3215: PUSH
3216: LD_EXP 19
3220: PUSH
3221: LD_INT 1
3223: ARRAY
3224: EQUAL
3225: PUSH
3226: LD_EXP 15
3230: PPUSH
3231: CALL_OW 310
3235: PUSH
3236: LD_EXP 19
3240: PUSH
3241: LD_INT 1
3243: ARRAY
3244: EQUAL
3245: AND
3246: IFFALSE 3792
3248: GO 3250
3250: DISABLE
3251: LD_INT 0
3253: PPUSH
3254: PPUSH
3255: PPUSH
// begin CenterNowOnUnits ( lab [ 1 ] ) ;
3256: LD_EXP 19
3260: PUSH
3261: LD_INT 1
3263: ARRAY
3264: PPUSH
3265: CALL_OW 87
// Say ( JMM , D1-JMM-2 ) ;
3269: LD_EXP 1
3273: PPUSH
3274: LD_STRING D1-JMM-2
3276: PPUSH
3277: CALL_OW 88
// Say ( DeltaDoctor , D1-Sci-2 ) ;
3281: LD_EXP 15
3285: PPUSH
3286: LD_STRING D1-Sci-2
3288: PPUSH
3289: CALL_OW 88
// Say ( JMM , D1-JMM-3 ) ;
3293: LD_EXP 1
3297: PPUSH
3298: LD_STRING D1-JMM-3
3300: PPUSH
3301: CALL_OW 88
// if IsOK ( Denis ) then
3305: LD_EXP 3
3309: PPUSH
3310: CALL_OW 302
3314: IFFALSE 3330
// Say ( DeltaDoctor , D1-Sci-3 ) else
3316: LD_EXP 15
3320: PPUSH
3321: LD_STRING D1-Sci-3
3323: PPUSH
3324: CALL_OW 88
3328: GO 3342
// Say ( DeltaDoctor , D1-Sci-3a ) ;
3330: LD_EXP 15
3334: PPUSH
3335: LD_STRING D1-Sci-3a
3337: PPUSH
3338: CALL_OW 88
// Say ( JMM , D1-JMM-4 ) ;
3342: LD_EXP 1
3346: PPUSH
3347: LD_STRING D1-JMM-4
3349: PPUSH
3350: CALL_OW 88
// tmp = FilterAllUnits ( [ [ f_side , 1 ] , [ f_class , 4 ] , [ f_not , [ f_inside ] ] ] ) ;
3354: LD_ADDR_VAR 0 3
3358: PUSH
3359: LD_INT 22
3361: PUSH
3362: LD_INT 1
3364: PUSH
3365: EMPTY
3366: LIST
3367: LIST
3368: PUSH
3369: LD_INT 25
3371: PUSH
3372: LD_INT 4
3374: PUSH
3375: EMPTY
3376: LIST
3377: LIST
3378: PUSH
3379: LD_INT 3
3381: PUSH
3382: LD_INT 54
3384: PUSH
3385: EMPTY
3386: LIST
3387: PUSH
3388: EMPTY
3389: LIST
3390: LIST
3391: PUSH
3392: EMPTY
3393: LIST
3394: LIST
3395: LIST
3396: PPUSH
3397: CALL_OW 69
3401: ST_TO_ADDR
// for i in FilterAllUnits ( [ f_side , 0 ] ) do
3402: LD_ADDR_VAR 0 1
3406: PUSH
3407: LD_INT 22
3409: PUSH
3410: LD_INT 0
3412: PUSH
3413: EMPTY
3414: LIST
3415: LIST
3416: PPUSH
3417: CALL_OW 69
3421: PUSH
3422: FOR_IN
3423: IFFALSE 3473
// for j in tmp do
3425: LD_ADDR_VAR 0 2
3429: PUSH
3430: LD_VAR 0 3
3434: PUSH
3435: FOR_IN
3436: IFFALSE 3469
// AddComTameXY ( j , GetX ( i ) , GetY ( i ) ) ;
3438: LD_VAR 0 2
3442: PPUSH
3443: LD_VAR 0 1
3447: PPUSH
3448: CALL_OW 250
3452: PPUSH
3453: LD_VAR 0 1
3457: PPUSH
3458: CALL_OW 251
3462: PPUSH
3463: CALL_OW 191
3467: GO 3435
3469: POP
3470: POP
3471: GO 3422
3473: POP
3474: POP
// Say ( DeltaDoctor , D1-Sci-4 ) ;
3475: LD_EXP 15
3479: PPUSH
3480: LD_STRING D1-Sci-4
3482: PPUSH
3483: CALL_OW 88
// Say ( JMM , D1-JMM-5 ) ;
3487: LD_EXP 1
3491: PPUSH
3492: LD_STRING D1-JMM-5
3494: PPUSH
3495: CALL_OW 88
// Say ( DeltaDoctor , D1-Sci-5 ) ;
3499: LD_EXP 15
3503: PPUSH
3504: LD_STRING D1-Sci-5
3506: PPUSH
3507: CALL_OW 88
// Say ( JMM , D1-JMM-6 ) ;
3511: LD_EXP 1
3515: PPUSH
3516: LD_STRING D1-JMM-6
3518: PPUSH
3519: CALL_OW 88
// SayRadio ( Harisson , D1-Har-6 ) ;
3523: LD_EXP 16
3527: PPUSH
3528: LD_STRING D1-Har-6
3530: PPUSH
3531: CALL_OW 94
// Say ( JMM , D1-JMM-7 ) ;
3535: LD_EXP 1
3539: PPUSH
3540: LD_STRING D1-JMM-7
3542: PPUSH
3543: CALL_OW 88
// SayRadio ( Harisson , D1-Har-7 ) ;
3547: LD_EXP 16
3551: PPUSH
3552: LD_STRING D1-Har-7
3554: PPUSH
3555: CALL_OW 94
// if IsOK ( Denis ) then
3559: LD_EXP 3
3563: PPUSH
3564: CALL_OW 302
3568: IFFALSE 3582
// Say ( JMM , D1-JMM-8 ) ;
3570: LD_EXP 1
3574: PPUSH
3575: LD_STRING D1-JMM-8
3577: PPUSH
3578: CALL_OW 88
// Say ( JMM , D1-JMM-8a ) ;
3582: LD_EXP 1
3586: PPUSH
3587: LD_STRING D1-JMM-8a
3589: PPUSH
3590: CALL_OW 88
// SayRadio ( Harisson , D1-Har-8 ) ;
3594: LD_EXP 16
3598: PPUSH
3599: LD_STRING D1-Har-8
3601: PPUSH
3602: CALL_OW 94
// Say ( JMM , D1-JMM-9 ) ;
3606: LD_EXP 1
3610: PPUSH
3611: LD_STRING D1-JMM-9
3613: PPUSH
3614: CALL_OW 88
// SayRadio ( Harisson , D1-Har-9 ) ;
3618: LD_EXP 16
3622: PPUSH
3623: LD_STRING D1-Har-9
3625: PPUSH
3626: CALL_OW 94
// Say ( JMM , D1-JMM-10 ) ;
3630: LD_EXP 1
3634: PPUSH
3635: LD_STRING D1-JMM-10
3637: PPUSH
3638: CALL_OW 88
// if IsOK ( Denis ) then
3642: LD_EXP 3
3646: PPUSH
3647: CALL_OW 302
3651: IFFALSE 3665
// Say ( JMM , D1-JMM-10a ) ;
3653: LD_EXP 1
3657: PPUSH
3658: LD_STRING D1-JMM-10a
3660: PPUSH
3661: CALL_OW 88
// SelectAndSaveCharacters ;
3665: CALL 4176 0 0
// SetResourceType ( GetBase ( lab [ 1 ] ) , 1 , 250 ) ;
3669: LD_EXP 19
3673: PUSH
3674: LD_INT 1
3676: ARRAY
3677: PPUSH
3678: CALL_OW 274
3682: PPUSH
3683: LD_INT 1
3685: PPUSH
3686: LD_INT 250
3688: PPUSH
3689: CALL_OW 277
// if FilterAllUnits ( [ [ f_side , 1 ] , [ f_btype , b_oil_mine ] ] ) > 0 then
3693: LD_INT 22
3695: PUSH
3696: LD_INT 1
3698: PUSH
3699: EMPTY
3700: LIST
3701: LIST
3702: PUSH
3703: LD_INT 30
3705: PUSH
3706: LD_INT 29
3708: PUSH
3709: EMPTY
3710: LIST
3711: LIST
3712: PUSH
3713: EMPTY
3714: LIST
3715: LIST
3716: PPUSH
3717: CALL_OW 69
3721: PUSH
3722: LD_INT 0
3724: GREATER
3725: IFFALSE 3751
// SetResourceType ( GetBase ( lab [ 1 ] ) , 2 , 300 ) ;
3727: LD_EXP 19
3731: PUSH
3732: LD_INT 1
3734: ARRAY
3735: PPUSH
3736: CALL_OW 274
3740: PPUSH
3741: LD_INT 2
3743: PPUSH
3744: LD_INT 300
3746: PPUSH
3747: CALL_OW 277
// InGameOff ;
3751: CALL_OW 9
// Query ( Q1 ) ;
3755: LD_STRING Q1
3757: PPUSH
3758: CALL_OW 97
// SetAreaMapShow ( ExitArea , 1 ) ;
3762: LD_INT 3
3764: PPUSH
3765: LD_INT 1
3767: PPUSH
3768: CALL_OW 424
// if IsInUnit ( JMM ) then
3772: LD_EXP 1
3776: PPUSH
3777: CALL_OW 310
3781: IFFALSE 3792
// ComExitBuilding ( JMM ) ;
3783: LD_EXP 1
3787: PPUSH
3788: CALL_OW 122
// end ;
3792: PPOPN 3
3794: END
// every 0 0$1 trigger FilterUnitsExceptArea ( ExitArea , [ [ f_side , 1 ] , [ f_type , unit_human ] ] ) = 0 do var i ;
3795: LD_INT 3
3797: PPUSH
3798: LD_INT 22
3800: PUSH
3801: LD_INT 1
3803: PUSH
3804: EMPTY
3805: LIST
3806: LIST
3807: PUSH
3808: LD_INT 21
3810: PUSH
3811: LD_INT 1
3813: PUSH
3814: EMPTY
3815: LIST
3816: LIST
3817: PUSH
3818: EMPTY
3819: LIST
3820: LIST
3821: PPUSH
3822: CALL_OW 71
3826: PUSH
3827: LD_INT 0
3829: EQUAL
3830: IFFALSE 4110
3832: GO 3834
3834: DISABLE
3835: LD_INT 0
3837: PPUSH
// begin if FilterUnitsInArea ( ExitArea , [ [ f_type , unit_vehicle ] ] ) > 0 then
3838: LD_INT 3
3840: PPUSH
3841: LD_INT 21
3843: PUSH
3844: LD_INT 2
3846: PUSH
3847: EMPTY
3848: LIST
3849: LIST
3850: PUSH
3851: EMPTY
3852: LIST
3853: PPUSH
3854: CALL_OW 70
3858: PUSH
3859: LD_INT 0
3861: GREATER
3862: IFFALSE 4100
// begin for i in FilterUnitsInArea ( ExitArea , [ [ f_type , unit_vehicle ] ] ) do
3864: LD_ADDR_VAR 0 1
3868: PUSH
3869: LD_INT 3
3871: PPUSH
3872: LD_INT 21
3874: PUSH
3875: LD_INT 2
3877: PUSH
3878: EMPTY
3879: LIST
3880: LIST
3881: PUSH
3882: EMPTY
3883: LIST
3884: PPUSH
3885: CALL_OW 70
3889: PUSH
3890: FOR_IN
3891: IFFALSE 4086
// begin if GetWeapon ( i ) = us_cargo_bay then
3893: LD_VAR 0 1
3897: PPUSH
3898: CALL_OW 264
3902: PUSH
3903: LD_INT 12
3905: EQUAL
3906: IFFALSE 4013
// begin yourVehicles = yourVehicles ^ [ [ GetNation ( i ) , GetChassis ( i ) , GetEngine ( i ) , GetControl ( i ) , GetWeapon ( i ) , GetCargoType ( i ) , GetCargo ( i , GetCargoType ( i ) ) ] ] ;
3908: LD_ADDR_EXP 14
3912: PUSH
3913: LD_EXP 14
3917: PUSH
3918: LD_VAR 0 1
3922: PPUSH
3923: CALL_OW 248
3927: PUSH
3928: LD_VAR 0 1
3932: PPUSH
3933: CALL_OW 265
3937: PUSH
3938: LD_VAR 0 1
3942: PPUSH
3943: CALL_OW 262
3947: PUSH
3948: LD_VAR 0 1
3952: PPUSH
3953: CALL_OW 263
3957: PUSH
3958: LD_VAR 0 1
3962: PPUSH
3963: CALL_OW 264
3967: PUSH
3968: LD_VAR 0 1
3972: PPUSH
3973: CALL_OW 288
3977: PUSH
3978: LD_VAR 0 1
3982: PPUSH
3983: LD_VAR 0 1
3987: PPUSH
3988: CALL_OW 288
3992: PPUSH
3993: CALL_OW 289
3997: PUSH
3998: EMPTY
3999: LIST
4000: LIST
4001: LIST
4002: LIST
4003: LIST
4004: LIST
4005: LIST
4006: PUSH
4007: EMPTY
4008: LIST
4009: ADD
4010: ST_TO_ADDR
// end else
4011: GO 4084
// begin yourVehicles = yourVehicles ^ [ [ GetNation ( i ) , GetChassis ( i ) , GetEngine ( i ) , GetControl ( i ) , GetWeapon ( i ) ] ] ;
4013: LD_ADDR_EXP 14
4017: PUSH
4018: LD_EXP 14
4022: PUSH
4023: LD_VAR 0 1
4027: PPUSH
4028: CALL_OW 248
4032: PUSH
4033: LD_VAR 0 1
4037: PPUSH
4038: CALL_OW 265
4042: PUSH
4043: LD_VAR 0 1
4047: PPUSH
4048: CALL_OW 262
4052: PUSH
4053: LD_VAR 0 1
4057: PPUSH
4058: CALL_OW 263
4062: PUSH
4063: LD_VAR 0 1
4067: PPUSH
4068: CALL_OW 264
4072: PUSH
4073: EMPTY
4074: LIST
4075: LIST
4076: LIST
4077: LIST
4078: LIST
4079: PUSH
4080: EMPTY
4081: LIST
4082: ADD
4083: ST_TO_ADDR
// end ; end ;
4084: GO 3890
4086: POP
4087: POP
// SaveVariable ( yourVehicles , 06_VehiclesIn06_1 ) ;
4088: LD_EXP 14
4092: PPUSH
4093: LD_STRING 06_VehiclesIn06_1
4095: PPUSH
4096: CALL_OW 39
// end ; ChangeMap ( 6 , %_cont ) ;
4100: LD_INT 6
4102: PPUSH
4103: LD_STRING %_cont
4105: PPUSH
4106: CALL_OW 340
// end ; end_of_file
4110: PPOPN 1
4112: END
// export function PrepareUnit ( ident , exist_mode ) ; var unit ; begin
4113: LD_INT 0
4115: PPUSH
4116: PPUSH
// if exist_mode then
4117: LD_VAR 0 2
4121: IFFALSE 4146
// unit := CreateCharacter ( mission_prefix_prev & ident ) else
4123: LD_ADDR_VAR 0 4
4127: PUSH
4128: LD_EXP 21
4132: PUSH
4133: LD_VAR 0 1
4137: STR
4138: PPUSH
4139: CALL_OW 34
4143: ST_TO_ADDR
4144: GO 4161
// unit := NewCharacter ( ident ) ;
4146: LD_ADDR_VAR 0 4
4150: PUSH
4151: LD_VAR 0 1
4155: PPUSH
4156: CALL_OW 25
4160: ST_TO_ADDR
// result := unit ;
4161: LD_ADDR_VAR 0 3
4165: PUSH
4166: LD_VAR 0 4
4170: ST_TO_ADDR
// end ;
4171: LD_VAR 0 3
4175: RET
// export function SelectAndSaveCharacters ; var i , yourPeople , selectedPeople , test , rnd ; begin
4176: LD_INT 0
4178: PPUSH
4179: PPUSH
4180: PPUSH
4181: PPUSH
4182: PPUSH
4183: PPUSH
// rnd = [ 5 , rand ( 4 , 5 ) , 4 ] [ Difficulty ] ;
4184: LD_ADDR_VAR 0 6
4188: PUSH
4189: LD_INT 5
4191: PUSH
4192: LD_INT 4
4194: PPUSH
4195: LD_INT 5
4197: PPUSH
4198: CALL_OW 12
4202: PUSH
4203: LD_INT 4
4205: PUSH
4206: EMPTY
4207: LIST
4208: LIST
4209: LIST
4210: PUSH
4211: LD_OWVAR 67
4215: ARRAY
4216: ST_TO_ADDR
// yourPeople = FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_human ] , [ f_or , [ f_class , 1 ] , [ f_class , 2 ] , [ f_class , 3 ] , [ f_class , 4 ] ] ] ) diff [ JMM , DeltaDoctor , Denis ] ;
4217: LD_ADDR_VAR 0 3
4221: PUSH
4222: LD_INT 22
4224: PUSH
4225: LD_INT 1
4227: PUSH
4228: EMPTY
4229: LIST
4230: LIST
4231: PUSH
4232: LD_INT 21
4234: PUSH
4235: LD_INT 1
4237: PUSH
4238: EMPTY
4239: LIST
4240: LIST
4241: PUSH
4242: LD_INT 2
4244: PUSH
4245: LD_INT 25
4247: PUSH
4248: LD_INT 1
4250: PUSH
4251: EMPTY
4252: LIST
4253: LIST
4254: PUSH
4255: LD_INT 25
4257: PUSH
4258: LD_INT 2
4260: PUSH
4261: EMPTY
4262: LIST
4263: LIST
4264: PUSH
4265: LD_INT 25
4267: PUSH
4268: LD_INT 3
4270: PUSH
4271: EMPTY
4272: LIST
4273: LIST
4274: PUSH
4275: LD_INT 25
4277: PUSH
4278: LD_INT 4
4280: PUSH
4281: EMPTY
4282: LIST
4283: LIST
4284: PUSH
4285: EMPTY
4286: LIST
4287: LIST
4288: LIST
4289: LIST
4290: LIST
4291: PUSH
4292: EMPTY
4293: LIST
4294: LIST
4295: LIST
4296: PPUSH
4297: CALL_OW 69
4301: PUSH
4302: LD_EXP 1
4306: PUSH
4307: LD_EXP 15
4311: PUSH
4312: LD_EXP 3
4316: PUSH
4317: EMPTY
4318: LIST
4319: LIST
4320: LIST
4321: DIFF
4322: ST_TO_ADDR
// selectedPeople = CharacterSelection ( text , rnd , rnd , [ sel_change_class , JMM , sel_dont_change_class , sel_not_hired , sel_changeable , sel_change_class ] ^ yourPeople ^ [ sel_dont_change_class , sel_not_changeable , Denis , DeltaDoctor ] , [ class_soldier , class_mechanic , [ class_engineer , 1 ] , class_scientistic ] ) ;
4323: LD_ADDR_VAR 0 4
4327: PUSH
4328: LD_STRING text
4330: PPUSH
4331: LD_VAR 0 6
4335: PPUSH
4336: LD_VAR 0 6
4340: PPUSH
4341: LD_INT -5
4343: PUSH
4344: LD_EXP 1
4348: PUSH
4349: LD_INT -6
4351: PUSH
4352: LD_INT -2
4354: PUSH
4355: LD_INT -3
4357: PUSH
4358: LD_INT -5
4360: PUSH
4361: EMPTY
4362: LIST
4363: LIST
4364: LIST
4365: LIST
4366: LIST
4367: LIST
4368: PUSH
4369: LD_VAR 0 3
4373: ADD
4374: PUSH
4375: LD_INT -6
4377: PUSH
4378: LD_INT -4
4380: PUSH
4381: LD_EXP 3
4385: PUSH
4386: LD_EXP 15
4390: PUSH
4391: EMPTY
4392: LIST
4393: LIST
4394: LIST
4395: LIST
4396: ADD
4397: PPUSH
4398: LD_INT 1
4400: PUSH
4401: LD_INT 3
4403: PUSH
4404: LD_INT 2
4406: PUSH
4407: LD_INT 1
4409: PUSH
4410: EMPTY
4411: LIST
4412: LIST
4413: PUSH
4414: LD_INT 4
4416: PUSH
4417: EMPTY
4418: LIST
4419: LIST
4420: LIST
4421: LIST
4422: PPUSH
4423: CALL_OW 42
4427: ST_TO_ADDR
// SaveCharacters ( JMM , mission_prefix & JMM ) ;
4428: LD_EXP 1
4432: PPUSH
4433: LD_EXP 20
4437: PUSH
4438: LD_STRING JMM
4440: STR
4441: PPUSH
4442: CALL_OW 38
// SaveCharacters ( DeltaDoctor , DeltaDoctor ) ;
4446: LD_EXP 15
4450: PPUSH
4451: LD_STRING DeltaDoctor
4453: PPUSH
4454: CALL_OW 38
// SaveCharacters ( Denis , mission_prefix & Denis ) ;
4458: LD_EXP 3
4462: PPUSH
4463: LD_EXP 20
4467: PUSH
4468: LD_STRING Denis
4470: STR
4471: PPUSH
4472: CALL_OW 38
// if Lisa in selectedPeople then
4476: LD_EXP 4
4480: PUSH
4481: LD_VAR 0 4
4485: IN
4486: IFFALSE 4518
// begin SaveCharacters ( Lisa , mission_prefix & Lisa ) ;
4488: LD_EXP 4
4492: PPUSH
4493: LD_EXP 20
4497: PUSH
4498: LD_STRING Lisa
4500: STR
4501: PPUSH
4502: CALL_OW 38
// SaveVariable ( 1 , LisaIn06 ) ;
4506: LD_INT 1
4508: PPUSH
4509: LD_STRING LisaIn06
4511: PPUSH
4512: CALL_OW 39
// end else
4516: GO 4539
// if IsOk ( Lisa ) then
4518: LD_EXP 4
4522: PPUSH
4523: CALL_OW 302
4527: IFFALSE 4539
// SaveVariable ( 1 , LisaStayInDelta ) ;
4529: LD_INT 1
4531: PPUSH
4532: LD_STRING LisaStayInDelta
4534: PPUSH
4535: CALL_OW 39
// if Bobby in selectedPeople then
4539: LD_EXP 6
4543: PUSH
4544: LD_VAR 0 4
4548: IN
4549: IFFALSE 4581
// begin SaveCharacters ( Bobby , mission_prefix & Bobby ) ;
4551: LD_EXP 6
4555: PPUSH
4556: LD_EXP 20
4560: PUSH
4561: LD_STRING Bobby
4563: STR
4564: PPUSH
4565: CALL_OW 38
// SaveVariable ( 1 , BobbyIn06 ) ;
4569: LD_INT 1
4571: PPUSH
4572: LD_STRING BobbyIn06
4574: PPUSH
4575: CALL_OW 39
// end else
4579: GO 4602
// if IsOk ( Bobby ) then
4581: LD_EXP 6
4585: PPUSH
4586: CALL_OW 302
4590: IFFALSE 4602
// SaveVariable ( 1 , BobbyStayInDelta ) ;
4592: LD_INT 1
4594: PPUSH
4595: LD_STRING BobbyStayInDelta
4597: PPUSH
4598: CALL_OW 39
// if Cyrus in selectedPeople then
4602: LD_EXP 7
4606: PUSH
4607: LD_VAR 0 4
4611: IN
4612: IFFALSE 4644
// begin SaveCharacters ( Cyrus , mission_prefix & Cyrus ) ;
4614: LD_EXP 7
4618: PPUSH
4619: LD_EXP 20
4623: PUSH
4624: LD_STRING Cyrus
4626: STR
4627: PPUSH
4628: CALL_OW 38
// SaveVariable ( 1 , CyrusIn06 ) ;
4632: LD_INT 1
4634: PPUSH
4635: LD_STRING CyrusIn06
4637: PPUSH
4638: CALL_OW 39
// end else
4642: GO 4665
// if IsOk ( Cyrus ) then
4644: LD_EXP 7
4648: PPUSH
4649: CALL_OW 302
4653: IFFALSE 4665
// SaveVariable ( 1 , CyrusStayInDelta ) ;
4655: LD_INT 1
4657: PPUSH
4658: LD_STRING CyrusStayInDelta
4660: PPUSH
4661: CALL_OW 39
// if Frank in selectedPeople then
4665: LD_EXP 5
4669: PUSH
4670: LD_VAR 0 4
4674: IN
4675: IFFALSE 4707
// begin SaveCharacters ( Frank , mission_prefix & Frank ) ;
4677: LD_EXP 5
4681: PPUSH
4682: LD_EXP 20
4686: PUSH
4687: LD_STRING Frank
4689: STR
4690: PPUSH
4691: CALL_OW 38
// SaveVariable ( 1 , FrankIn06 ) ;
4695: LD_INT 1
4697: PPUSH
4698: LD_STRING FrankIn06
4700: PPUSH
4701: CALL_OW 39
// end else
4705: GO 4728
// if IsOk ( Lisa ) then
4707: LD_EXP 4
4711: PPUSH
4712: CALL_OW 302
4716: IFFALSE 4728
// SaveVariable ( 1 , FrankStayInDelta ) ;
4718: LD_INT 1
4720: PPUSH
4721: LD_STRING FrankStayInDelta
4723: PPUSH
4724: CALL_OW 39
// if Brown in selectedPeople then
4728: LD_EXP 8
4732: PUSH
4733: LD_VAR 0 4
4737: IN
4738: IFFALSE 4770
// begin SaveCharacters ( Brown , mission_prefix & Brown ) ;
4740: LD_EXP 8
4744: PPUSH
4745: LD_EXP 20
4749: PUSH
4750: LD_STRING Brown
4752: STR
4753: PPUSH
4754: CALL_OW 38
// SaveVariable ( 1 , BrownIn06 ) ;
4758: LD_INT 1
4760: PPUSH
4761: LD_STRING BrownIn06
4763: PPUSH
4764: CALL_OW 39
// end else
4768: GO 4791
// if IsOk ( Lisa ) then
4770: LD_EXP 4
4774: PPUSH
4775: CALL_OW 302
4779: IFFALSE 4791
// SaveVariable ( 1 , BrownStayInDelta ) ;
4781: LD_INT 1
4783: PPUSH
4784: LD_STRING BrownStayInDelta
4786: PPUSH
4787: CALL_OW 39
// if Donaldson in selectedPeople then
4791: LD_EXP 9
4795: PUSH
4796: LD_VAR 0 4
4800: IN
4801: IFFALSE 4833
// begin SaveCharacters ( Donaldson , mission_prefix & Donaldson ) ;
4803: LD_EXP 9
4807: PPUSH
4808: LD_EXP 20
4812: PUSH
4813: LD_STRING Donaldson
4815: STR
4816: PPUSH
4817: CALL_OW 38
// SaveVariable ( 1 , DonaldsonIn06 ) ;
4821: LD_INT 1
4823: PPUSH
4824: LD_STRING DonaldsonIn06
4826: PPUSH
4827: CALL_OW 39
// end else
4831: GO 4854
// if IsOk ( Lisa ) then
4833: LD_EXP 4
4837: PPUSH
4838: CALL_OW 302
4842: IFFALSE 4854
// SaveVariable ( 1 , DonaldsonStayInDelta ) ;
4844: LD_INT 1
4846: PPUSH
4847: LD_STRING DonaldsonStayInDelta
4849: PPUSH
4850: CALL_OW 39
// if Gladstone in selectedPeople then
4854: LD_EXP 2
4858: PUSH
4859: LD_VAR 0 4
4863: IN
4864: IFFALSE 4896
// begin SaveCharacters ( Gladstone , mission_prefix & Gladstone ) ;
4866: LD_EXP 2
4870: PPUSH
4871: LD_EXP 20
4875: PUSH
4876: LD_STRING Gladstone
4878: STR
4879: PPUSH
4880: CALL_OW 38
// SaveVariable ( 1 , GladstoneIn06 ) ;
4884: LD_INT 1
4886: PPUSH
4887: LD_STRING GladstoneIn06
4889: PPUSH
4890: CALL_OW 39
// end else
4894: GO 4917
// if IsOk ( Lisa ) then
4896: LD_EXP 4
4900: PPUSH
4901: CALL_OW 302
4905: IFFALSE 4917
// SaveVariable ( 1 , GladstoneStayInDelta ) ;
4907: LD_INT 1
4909: PPUSH
4910: LD_STRING GladstoneStayInDelta
4912: PPUSH
4913: CALL_OW 39
// SetSide ( FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_human ] ] ) , 4 ) ;
4917: LD_INT 22
4919: PUSH
4920: LD_INT 1
4922: PUSH
4923: EMPTY
4924: LIST
4925: LIST
4926: PUSH
4927: LD_INT 21
4929: PUSH
4930: LD_INT 1
4932: PUSH
4933: EMPTY
4934: LIST
4935: LIST
4936: PUSH
4937: EMPTY
4938: LIST
4939: LIST
4940: PPUSH
4941: CALL_OW 69
4945: PPUSH
4946: LD_INT 4
4948: PPUSH
4949: CALL_OW 235
// for i in selectedPeople do
4953: LD_ADDR_VAR 0 2
4957: PUSH
4958: LD_VAR 0 4
4962: PUSH
4963: FOR_IN
4964: IFFALSE 4980
// SetSide ( i , 1 ) ;
4966: LD_VAR 0 2
4970: PPUSH
4971: LD_INT 1
4973: PPUSH
4974: CALL_OW 235
4978: GO 4963
4980: POP
4981: POP
// for i in yourApemans do
4982: LD_ADDR_VAR 0 2
4986: PUSH
4987: LD_EXP 13
4991: PUSH
4992: FOR_IN
4993: IFFALSE 5009
// SetSide ( i , 1 ) ;
4995: LD_VAR 0 2
4999: PPUSH
5000: LD_INT 1
5002: PPUSH
5003: CALL_OW 235
5007: GO 4992
5009: POP
5010: POP
// SetSide ( JMM , 1 ) ;
5011: LD_EXP 1
5015: PPUSH
5016: LD_INT 1
5018: PPUSH
5019: CALL_OW 235
// SetSkill ( yourApemans , 2 , 5 ) ;
5023: LD_EXP 13
5027: PPUSH
5028: LD_INT 2
5030: PPUSH
5031: LD_INT 5
5033: PPUSH
5034: CALL_OW 237
// SaveCharacters ( yourApemans , ApeIn06 ) ;
5038: LD_EXP 13
5042: PPUSH
5043: LD_STRING ApeIn06
5045: PPUSH
5046: CALL_OW 38
// SaveCharacters ( FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_human ] , [ f_or , [ f_class , 1 ] , [ f_class , 2 ] , [ f_class , 3 ] , [ f_class , 4 ] ] ] ) diff [ JMM , Lisa , Bobby , Cyrus , Frank , Brown , Donaldson , Gladstone ] , OthersIn06 ) ;
5050: LD_INT 22
5052: PUSH
5053: LD_INT 1
5055: PUSH
5056: EMPTY
5057: LIST
5058: LIST
5059: PUSH
5060: LD_INT 21
5062: PUSH
5063: LD_INT 1
5065: PUSH
5066: EMPTY
5067: LIST
5068: LIST
5069: PUSH
5070: LD_INT 2
5072: PUSH
5073: LD_INT 25
5075: PUSH
5076: LD_INT 1
5078: PUSH
5079: EMPTY
5080: LIST
5081: LIST
5082: PUSH
5083: LD_INT 25
5085: PUSH
5086: LD_INT 2
5088: PUSH
5089: EMPTY
5090: LIST
5091: LIST
5092: PUSH
5093: LD_INT 25
5095: PUSH
5096: LD_INT 3
5098: PUSH
5099: EMPTY
5100: LIST
5101: LIST
5102: PUSH
5103: LD_INT 25
5105: PUSH
5106: LD_INT 4
5108: PUSH
5109: EMPTY
5110: LIST
5111: LIST
5112: PUSH
5113: EMPTY
5114: LIST
5115: LIST
5116: LIST
5117: LIST
5118: LIST
5119: PUSH
5120: EMPTY
5121: LIST
5122: LIST
5123: LIST
5124: PPUSH
5125: CALL_OW 69
5129: PUSH
5130: LD_EXP 1
5134: PUSH
5135: LD_EXP 4
5139: PUSH
5140: LD_EXP 6
5144: PUSH
5145: LD_EXP 7
5149: PUSH
5150: LD_EXP 5
5154: PUSH
5155: LD_EXP 8
5159: PUSH
5160: LD_EXP 9
5164: PUSH
5165: LD_EXP 2
5169: PUSH
5170: EMPTY
5171: LIST
5172: LIST
5173: LIST
5174: LIST
5175: LIST
5176: LIST
5177: LIST
5178: LIST
5179: DIFF
5180: PPUSH
5181: LD_STRING OthersIn06
5183: PPUSH
5184: CALL_OW 38
// SaveCharacters ( FilterAllUnits ( [ [ f_side , 4 ] , [ f_or , [ f_class , 1 ] , [ f_class , 2 ] , [ f_class , 3 ] , [ f_class , 4 ] ] ] ) diff randomsDelta ^ DeltaDoctor , OthersStayInDelta ) ;
5188: LD_INT 22
5190: PUSH
5191: LD_INT 4
5193: PUSH
5194: EMPTY
5195: LIST
5196: LIST
5197: PUSH
5198: LD_INT 2
5200: PUSH
5201: LD_INT 25
5203: PUSH
5204: LD_INT 1
5206: PUSH
5207: EMPTY
5208: LIST
5209: LIST
5210: PUSH
5211: LD_INT 25
5213: PUSH
5214: LD_INT 2
5216: PUSH
5217: EMPTY
5218: LIST
5219: LIST
5220: PUSH
5221: LD_INT 25
5223: PUSH
5224: LD_INT 3
5226: PUSH
5227: EMPTY
5228: LIST
5229: LIST
5230: PUSH
5231: LD_INT 25
5233: PUSH
5234: LD_INT 4
5236: PUSH
5237: EMPTY
5238: LIST
5239: LIST
5240: PUSH
5241: EMPTY
5242: LIST
5243: LIST
5244: LIST
5245: LIST
5246: LIST
5247: PUSH
5248: EMPTY
5249: LIST
5250: LIST
5251: PPUSH
5252: CALL_OW 69
5256: PUSH
5257: LD_EXP 11
5261: PUSH
5262: LD_EXP 15
5266: ADD
5267: DIFF
5268: PPUSH
5269: LD_STRING OthersStayInDelta
5271: PPUSH
5272: CALL_OW 38
// end ; end_of_file
5276: LD_VAR 0 1
5280: RET
// on Command ( comandid ) do var i ;
5281: LD_INT 0
5283: PPUSH
// begin if comandid = 65 then
5284: LD_VAR 0 1
5288: PUSH
5289: LD_INT 65
5291: EQUAL
5292: IFFALSE 5333
// for i in FilterAllUnits ( [ [ f_side , 1 ] ] ) do
5294: LD_ADDR_VAR 0 2
5298: PUSH
5299: LD_INT 22
5301: PUSH
5302: LD_INT 1
5304: PUSH
5305: EMPTY
5306: LIST
5307: LIST
5308: PUSH
5309: EMPTY
5310: LIST
5311: PPUSH
5312: CALL_OW 69
5316: PUSH
5317: FOR_IN
5318: IFFALSE 5331
// ComStop ( i ) ;
5320: LD_VAR 0 2
5324: PPUSH
5325: CALL_OW 141
5329: GO 5317
5331: POP
5332: POP
// end ;
5333: PPOPN 2
5335: END
// on ApemanTamed ( apeman , human ) do var tmp ;
5336: LD_INT 0
5338: PPUSH
// begin tmp = FilterAllUnits ( [ [ f_side , 1 ] , [ f_type , unit_building ] , [ f_btype , b_depot ] ] ) ;
5339: LD_ADDR_VAR 0 3
5343: PUSH
5344: LD_INT 22
5346: PUSH
5347: LD_INT 1
5349: PUSH
5350: EMPTY
5351: LIST
5352: LIST
5353: PUSH
5354: LD_INT 21
5356: PUSH
5357: LD_INT 3
5359: PUSH
5360: EMPTY
5361: LIST
5362: LIST
5363: PUSH
5364: LD_INT 30
5366: PUSH
5367: LD_INT 0
5369: PUSH
5370: EMPTY
5371: LIST
5372: LIST
5373: PUSH
5374: EMPTY
5375: LIST
5376: LIST
5377: LIST
5378: PPUSH
5379: CALL_OW 69
5383: ST_TO_ADDR
// ComEnterUnit ( apeman , tmp [ 1 ] ) ;
5384: LD_VAR 0 1
5388: PPUSH
5389: LD_VAR 0 3
5393: PUSH
5394: LD_INT 1
5396: ARRAY
5397: PPUSH
5398: CALL_OW 120
// SetSide ( apeman , 4 ) ;
5402: LD_VAR 0 1
5406: PPUSH
5407: LD_INT 4
5409: PPUSH
5410: CALL_OW 235
// end ;
5414: PPOPN 3
5416: END
